Token Payload Creation: When a user successfully logs in, the authentication service creates a token payload. This payload includes relevant user data, and in this case, it primarily consists of the user ID. This is done through the userId.toHexString() method, ensuring that the user ID is encoded into the token.

Expiration Setting: Along with the user ID, the token also has an expiration date. This is calculated based on the current time and the configured expiration period. The code sets this expiration using methods that handle the timing.

Token Generation: After forming the payload, the JWT is generated by calling the jwtService.sign() method, passing in the token payload that was just created.

Decoding User Information: When a request containing the JWT is received by a microservice, the JWT is decoded to validate it. The decoded token includes the payload, which carries the user ID. This is managed in the validate method of the JWT strategy, where the user ID can be extracted for further processing.

Accessing User Data: After successful decoding, the user ID becomes accessible throughout the application, allowing the system to verify user identity and permissions without needing to query a database every time.

Thus, even if the code may not explicitly show user information in every instance, the JWT encapsulates it in the payload, enabling efficient user verification across microservices.